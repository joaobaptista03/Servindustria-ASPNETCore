@page "/admin/pedidosContacto/{UnseenCallRequestsCurrentPage?}/{SeenCallRequestsCurrentPage?}"
@model CallRequestsModel

<link rel="stylesheet" href="~/css/admin.css" asp-append-version="true">
<div class="bigContainer">
    <div class="callRequestContainer">
        <h1>Pedidos de Contacto Não Vistos</h1>

        @if (Model.TotalUnseenCallRequests == 0)
        {
            <br>
            <p>Já viu todos os pedidos de contacto!</p>
        }

        @foreach (var item in Model.UnseenCallRequests)
        {
            <div class="callRequest">
                <p>Nome: @item.Name</p>
                @if (item.Company != null)
                {
                    <p>Empresa: @item.Company</p>
                }
                <p>Telefone: @item.Phone</p>
                @if (item.Message != null) {
                    <p>Mensagem: @item.Message</p>
                }
                <p>Data: @item.Date.ToString("dd-MM-yyyy HH:mm:ss")</p>

                <form method="post" asp-page="CallRequests" asp-page-handler="SeenUnseen">
                    <input type="hidden" name="UnseenCallRequestsCurrentPage" value="@(Model.UnseenCallRequestsCurrentPage)" />
                    <input type="hidden" name="SeenCallRequestsCurrentPage" value="@(Model.SeenCallRequestsCurrentPage)" />
                    <input type="hidden" name="id" value="@item.Id" />
                    <input type="submit" value="Visto" />
                </form>
            </div>
        }

        <div class="pagination">
            <form method="post" asp-page="CallRequests" asp-page-handler="Page">
                <input type="hidden" name="UnseenCallRequestsCurrentPage" value="@(Model.UnseenCallRequestsCurrentPage - 1)" />
                <input type="hidden" name="SeenCallRequestsCurrentPage" value="@(Model.SeenCallRequestsCurrentPage)" />
                <input class="@(Model.UnseenCallRequestsCurrentPage <= 1 ? "invisible-btn" : "")" type="submit" value="<" />
            </form>

            @if (Model.TotalUnseenCallRequests != 0)
            {
                <span>Página @Model.UnseenCallRequestsCurrentPage</span>
            }

            <form method="post" asp-page="CallRequests" asp-page-handler="Page">
                <input type="hidden" name="UnseenCallRequestsCurrentPage" value="@(Model.UnseenCallRequestsCurrentPage + 1)" />
                <input type="hidden" name="SeenCallRequestsCurrentPage" value="@(Model.SeenCallRequestsCurrentPage)" />
                <input class="page-btn @(Model.UnseenCallRequestsCurrentPage * Model.PageSize >= Model.TotalUnseenCallRequests ? "invisible-btn" : "")" type="submit" value=">" />
            </form>
        </div>
    </div>

    <div class="callRequestContainer">
        <h1>Pedidos de Contacto Vistos</h1>

        @if (Model.TotalSeenCallRequests == 0)
        {
            <br>
            <p>Não existem pedidos de contacto vistos!</p>
        }

        @foreach (var item in Model.SeenCallRequests)
        {
            <div class="callRequest">
                <p>Nome: @item.Name</p>
                @if (item.Company != null)
                {
                    <p>Empresa: @item.Company</p>
                }
                <p>Telefone: @item.Phone</p>
                @if (item.Message != null) {
                    <p>Mensagem: @item.Message</p>
                }
                <p>Data: @item.Date.ToString("dd-MM-yyyy HH:mm:ss")</p>

                <form method="post" asp-page="CallRequests" asp-page-handler="SeenUnseen">
                    <input type="hidden" name="id" value="@item.Id" />
                    <input type="hidden" name="UnseenCallRequestsCurrentPage" value="@(Model.UnseenCallRequestsCurrentPage)" />
                    <input type="hidden" name="SeenCallRequestsCurrentPage" value="@(Model.SeenCallRequestsCurrentPage)" />
                    <input type="submit" value="Não Visto" />
                </form>
            </div>
        }

        <div class="pagination">
            <form method="post" asp-page="CallRequests" asp-page-handler="Page">
                <input type="hidden" name="UnseenCallRequestsCurrentPage" value="@(Model.UnseenCallRequestsCurrentPage)" />
                <input type="hidden" name="SeenCallRequestsCurrentPage" value="@(Model.SeenCallRequestsCurrentPage - 1)" />
                <input class="@(Model.SeenCallRequestsCurrentPage <= 1 ? "invisible-btn" : "")" type="submit" value="<" />
            </form>

            @if (Model.TotalSeenCallRequests != 0)
            {
                <span>Página @Model.SeenCallRequestsCurrentPage</span>
            }

            <form method="post" asp-page="CallRequests" asp-page-handler="Page">
                <input type="hidden" name="UnseenCallRequestsCurrentPage" value="@(Model.UnseenCallRequestsCurrentPage)" />
                <input type="hidden" name="SeenCallRequestsCurrentPage" value="@(Model.SeenCallRequestsCurrentPage + 1)" />
                <input class="page-btn @(Model.SeenCallRequestsCurrentPage * Model.PageSize >= Model.TotalSeenCallRequests ? "invisible-btn" : "")" type="submit" value=">" />
            </form>
        </div>
    </div>

@section Scripts {
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="~/js/main.js"></script>
}